Version 4
SHEET 1 1068 1032
WIRE 288 208 288 192
WIRE -880 256 -880 224
WIRE -736 256 -736 224
WIRE -592 256 -592 224
WIRE 288 304 288 272
WIRE 128 352 128 192
WIRE -880 368 -880 336
WIRE -736 368 -736 336
WIRE -592 368 -592 336
WIRE 288 448 288 384
WIRE 384 448 288 448
WIRE 464 496 448 496
WIRE 608 496 544 496
WIRE -864 560 -896 560
WIRE -800 560 -864 560
WIRE -688 560 -720 560
WIRE 384 560 384 544
WIRE -576 576 -624 576
WIRE -896 592 -896 560
WIRE -688 592 -704 592
WIRE 0 608 -32 608
WIRE 128 608 128 432
WIRE 128 608 0 608
WIRE 160 608 128 608
WIRE 288 608 288 448
WIRE 288 608 256 608
WIRE 368 608 288 608
WIRE -704 624 -704 592
WIRE -656 624 -656 608
WIRE -656 624 -704 624
WIRE 0 624 0 608
WIRE 128 624 128 608
WIRE -800 640 -848 640
WIRE -720 640 -720 560
WIRE -896 656 -896 624
WIRE 256 672 256 608
WIRE 256 672 208 672
WIRE -848 688 -848 640
WIRE 288 688 288 608
WIRE 0 704 0 688
WIRE 0 704 -16 704
WIRE 128 704 128 688
WIRE 0 720 0 704
WIRE -720 736 -720 640
WIRE -848 752 -848 720
WIRE 0 768 0 752
WIRE -800 784 -800 736
WIRE 128 816 128 784
WIRE 288 816 288 768
WIRE 288 816 128 816
WIRE 128 832 128 816
WIRE -800 848 -800 816
FLAG -32 608 sw_debounced
FLAG -592 368 0
FLAG -592 224 +5V
FLAG -864 560 on-off
FLAG -896 656 0
FLAG 128 832 0
FLAG -576 576 sw_ctrl
FLAG 336 752 0
FLAG 128 192 +5V
FLAG -656 544 0
FLAG -848 752 0
FLAG -800 848 0
FLAG -656 624 +5V
FLAG 368 608 sw_bounced
FLAG 336 704 sw_ctrl
FLAG -736 224 VIH
FLAG -736 368 0
FLAG -880 224 VIL
FLAG -880 368 0
FLAG 384 560 0
FLAG 0 768 0
FLAG -16 704 led_ctrl
FLAG 608 496 sw_debounced
FLAG 288 192 +5V
SYMBOL cap 112 624 R0
SYMATTR InstName C1
SYMATTR Value 1u
SYMATTR SpiceLine V=25 Irms=3.55 Rser=0.0172 Lser=0 mfg="KEMET" pn="C1210C105K3PAC" type="X5R"
SYMBOL res 272 288 R0
SYMATTR InstName R1
SYMATTR Value 470
SYMBOL LED 272 208 R0
SYMATTR InstName LD1
SYMATTR Value SFH4240
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL voltage -592 240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VCC
SYMATTR Value {VCC}
SYMBOL MiniSyms4\\voltage- -896 608 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 5 1 1n 1n 1 0 1)
SYMBOL sw 288 784 R180
WINDOW 0 -44 104 Left 2
WINDOW 3 -118 5 Left 2
SYMATTR InstName S1
SYMATTR Value IDEAL_SW
SYMBOL res 112 336 R0
SYMATTR InstName uC-pull-up
SYMATTR Value 20k
SYMBOL MiniSyms4\\voltage- -848 704 R0
WINDOW 3 -62 16 Left 0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName turn_off_bounce
SYMATTR Value PULSE(0 10 2 1n 1n 1m 2m 10)
SYMBOL res -704 544 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 100
SYMBOL res -704 624 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 100
SYMBOL MiniSyms4\\voltage- -800 800 R0
WINDOW 3 -62 16 Left 0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName turn_on_bounce
SYMATTR Value PULSE(10 0 1 1n 1n 1m 2m 10)
SYMBOL res -704 720 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 100
SYMBOL EXTRA\\ExtraOpamps\\LM358_NS -656 576 M180
SYMATTR InstName U1
SYMBOL voltage -736 240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VIH
SYMATTR Value {0.7*VCC}
SYMBOL voltage -880 240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VIL
SYMATTR Value {0.3*VCC}
SYMBOL pnp 448 544 R180
WINDOW 0 62 37 Left 2
WINDOW 3 53 67 Left 2
SYMATTR InstName Q1
SYMATTR Value BC856A
SYMBOL MiniSyms4\\voltage- 0 736 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(5 0 3 1n 1n 1 0 1)
SYMBOL res 560 480 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 100
SYMBOL diode -16 624 R0
SYMATTR InstName D1
SYMBOL pnp 160 672 R270
WINDOW 0 62 37 Left 2
WINDOW 3 53 67 Left 2
SYMATTR InstName Q2
SYMATTR Value BC856A
SYMBOL res 112 688 R0
SYMATTR InstName R6
SYMATTR Value 100
TEXT -920 984 Left 2 !.model IDEAL_SW SW(Ron=1u Roff=1Meg Vt=0, Vh=0, Lser=0, Vser=0)
TEXT -922 948 Left 2 !.tran 0 5 0 startup
TEXT -920 1016 Left 2 !.param VCC=5
